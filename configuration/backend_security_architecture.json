{
  "project_name": "ChatterFix Enterprise Backend",
  "architecture_type": "Secure Microservices with API Gateway",
  "security_framework": {
    "authentication": {
      "method": "OAuth2 + OpenID Connect (OIDC)",
      "providers": [
        "Azure AD",
        "Auth0",
        "Keycloak"
      ],
      "token_type": "JWT with refresh tokens",
      "session_management": "Stateless with Redis cache"
    },
    "authorization": {
      "model": "Role-Based Access Control (RBAC)",
      "permissions": [
        "work_orders:read, work_orders:write, work_orders:delete",
        "assets:read, assets:write, assets:delete",
        "parts:read, parts:write, parts:manage_inventory",
        "users:read, users:write, users:admin",
        "reports:read, reports:generate, reports:admin"
      ],
      "tenant_isolation": "Row-level security with tenant_id"
    },
    "data_protection": {
      "encryption_at_rest": "AES-256 database encryption",
      "encryption_in_transit": "TLS 1.3 with certificate pinning",
      "field_encryption": "PII fields encrypted with separate keys",
      "key_management": "HashiCorp Vault or AWS KMS"
    }
  },
  "microservices_architecture": {
    "api_gateway": {
      "technology": "Kong or AWS API Gateway",
      "features": [
        "Rate limiting per tenant/user",
        "Request/response transformation",
        "Authentication enforcement",
        "Circuit breaker pattern",
        "API versioning"
      ]
    },
    "services": {
      "authentication_service": {
        "port": 8000,
        "responsibilities": [
          "User authentication",
          "Token management",
          "RBAC"
        ],
        "database": "PostgreSQL with encrypted user data"
      },
      "work_orders_service": {
        "port": 8002,
        "responsibilities": [
          "Work order CRUD",
          "Status management",
          "Assignment"
        ],
        "database": "PostgreSQL with audit logging"
      },
      "assets_service": {
        "port": 8003,
        "responsibilities": [
          "Asset management",
          "Maintenance history",
          "IoT integration"
        ],
        "database": "PostgreSQL with time-series data"
      },
      "parts_service": {
        "port": 8004,
        "responsibilities": [
          "Inventory management",
          "Parts ordering",
          "Cost tracking"
        ],
        "database": "PostgreSQL with transaction logging"
      },
      "analytics_service": {
        "port": 8005,
        "responsibilities": [
          "Reporting",
          "KPI calculation",
          "Data aggregation"
        ],
        "database": "PostgreSQL + TimescaleDB for analytics"
      },
      "notification_service": {
        "port": 8006,
        "responsibilities": [
          "Real-time notifications",
          "Email alerts",
          "SMS"
        ],
        "technology": "FastAPI + WebSockets + Celery"
      },
      "document_service": {
        "port": 8007,
        "responsibilities": [
          "File upload",
          "Document management",
          "Version control"
        ],
        "storage": "S3-compatible with virus scanning"
      }
    },
    "service_mesh": {
      "technology": "Istio or Linkerd",
      "features": [
        "mTLS between services",
        "Traffic management",
        "Observability",
        "Security policies"
      ]
    }
  },
  "database_architecture": {
    "primary_database": "PostgreSQL 15+ with row-level security",
    "multi_tenancy": {
      "strategy": "Shared database with tenant isolation",
      "implementation": "tenant_id in all tables + RLS policies"
    },
    "performance": {
      "connection_pooling": "PgBouncer",
      "read_replicas": "For analytics and reporting",
      "caching": "Redis for session and frequently accessed data"
    },
    "backup_strategy": {
      "continuous_backup": "WAL-E or pgBackRest",
      "point_in_time_recovery": "15-minute RPO",
      "disaster_recovery": "Cross-region replication"
    }
  },
  "event_driven_architecture": {
    "message_broker": "Apache Kafka or RabbitMQ",
    "event_types": [
      "WorkOrderCreated",
      "WorkOrderCompleted",
      "AssetStatusChanged",
      "PartStockLow",
      "MaintenanceDue",
      "UserAuthenticated"
    ],
    "event_sourcing": "For audit trail and state reconstruction"
  },
  "security_monitoring": {
    "logging": {
      "structured_logging": "JSON format with correlation IDs",
      "log_aggregation": "ELK Stack or Grafana Loki",
      "audit_logging": "All data access and modifications"
    },
    "monitoring": {
      "apm": "New Relic or Datadog",
      "metrics": "Prometheus + Grafana",
      "alerting": "PagerDuty integration"
    },
    "security_scanning": {
      "sast": "SonarQube for code analysis",
      "dast": "OWASP ZAP for runtime testing",
      "dependency_scanning": "Snyk or WhiteSource"
    }
  },
  "compliance": {
    "standards": [
      "SOC 2 Type II",
      "ISO 27001",
      "GDPR"
    ],
    "data_governance": {
      "data_classification": "Public, Internal, Confidential, Restricted",
      "retention_policies": "Automated data archival and deletion",
      "privacy_controls": "Data subject request handling"
    }
  }
}